{{- $css_filename := "bootstrap.css" -}}

{{- if eq (getenv "HUGO_ENV") "production" -}}
{{- $css_filename = "bootstrap.min.css" -}}
{{- end -}}

{{- $css := resources.Get (printf "docs/%s/dist/css/%s" $.Site.Params.docs_version $css_filename) -}}

{{- "<!-- Bootstrap core CSS -->" | safeHTML }}
<link href="{{ $css.RelPermalink }}" rel="stylesheet" integrity="{{ ($css | fingerprint "sha384").Data.Integrity }}" crossorigin="anonymous">

{{- if (ne .Page.Layout "examples") }}
{{- $targetDocsCssPath := printf "/docs/%s/assets/css/docs.css" .Site.Params.docs_version -}}
{{- $sassOptions := dict "targetPath" $targetDocsCssPath "precision" 6 -}}
{{- $postcssOptions := dict "use" "autoprefixer" "noMap" true -}}

{{- if (eq (getenv "HUGO_ENV") "production") -}}
  {{- $sassOptions = merge $sassOptions (dict "outputStyle" "compressed") -}}
{{- end -}}

{{- $style := resources.Get "scss/docs.scss" | toCSS $sassOptions | postCSS $postcssOptions }}

<link rel="stylesheet" href="{{ $style.Permalink | relURL }}">
{{- end }}
